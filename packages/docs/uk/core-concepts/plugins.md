# –ü–ª–∞–≥—ñ–Ω–∏

–°—Ö–æ–≤–∏—â–∞ Pinia –º–æ–∂–Ω–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –∑–∞–≤–¥—è–∫–∏ API –Ω–∏–∑—å–∫–æ–≥–æ —Ä—ñ–≤–Ω—è. –û—Å—å —Å–ø–∏—Å–æ–∫ —Ä–µ—á–µ–π, —è–∫—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –∑—Ä–æ–±–∏—Ç–∏:

- –î–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–æ —Å—Ö–æ–≤–∏—â
- –î–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â
- –î–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –¥–æ —Å—Ö–æ–≤–∏—â
- –û–±–≥–æ—Ä—Ç–∞—Ç–∏ —ñ—Å–Ω—É—é—á—ñ –º–µ—Ç–æ–¥–∏
- –ü–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –¥—ñ—ó —Ç–∞ —ó—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
- –ó–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –ø–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏, —Ç–∞–∫—ñ —è–∫ [Local Storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- –ó–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ **–ª–∏—à–µ** –¥–æ –ø–µ–≤–Ω–∏—Ö —Å—Ö–æ–≤–∏—â

–ü–ª–∞–≥—ñ–Ω–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ pinia –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `pinia.use()`. –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–º –ø—Ä–∏–∫–ª–∞–¥–æ–º —î –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ—ó –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–æ –≤—Å—ñ—Ö —Å—Ö–æ–≤–∏—â —à–ª—è—Ö–æ–º –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞:

```js
import { createPinia } from 'pinia'

// –¥–æ–¥–∞–π—Ç–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `secret` –¥–æ –∫–æ–∂–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞,
// —è–∫–∏–π —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—å–æ–≥–æ –ø–ª–∞–≥—ñ–Ω–∞, —Ü–µ
// –º–æ–∂–µ –±—É—Ç–∏ –≤ —ñ–Ω—à–æ–º—É —Ñ–∞–π–ª—ñ
function SecretPiniaPlugin() {
  return { secret: 'the cake is a lie' }
}

const pinia = createPinia()
// –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –ø–ª–∞–≥—ñ–Ω–∞ pinia
pinia.use(SecretPiniaPlugin)

// –≤ —ñ–Ω—à–æ–º—É —Ñ–∞–π–ª—ñ
const store = useStore()
store.secret // 'the cake is a lie'
```

–¶–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤, —Ç–∞–∫–∏—Ö —è–∫ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä, –º–æ–¥–∞–ª—å–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–±–æ –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

## –í—Å—Ç—É–ø

–ü–ª–∞–≥—ñ–Ω Pinia - —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –∑–∞ –±–∞–∂–∞–Ω–Ω—è–º –ø–æ–≤–µ—Ä—Ç–∞—î –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ —Å—Ö–æ–≤–∏—â–∞. –í–æ–Ω–∞ –ø—Ä–∏–π–º–∞—î –æ–¥–∏–Ω –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç, _context_:

```js
export function myPiniaPlugin(context) {
  context.pinia // pinia, —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `createPinia()`
  context.app // –ø–æ—Ç–æ—á–Ω–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `createApp()` (–ª–∏—à–µ Vue 3)
  context.store // —Å—Ö–æ–≤–∏—â–µ, —è–∫–µ –¥–æ–ø–æ–≤–Ω–µ–Ω–æ –ø–ª–∞–≥—ñ–Ω–æ–º
  context.options // –æ–±'—î–∫—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, —â–æ –≤–∏–∑–Ω–∞—á–∞—î —Å—Ö–æ–≤–∏—â–µ, –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ `defineStore()`
  // ...
}
```

–ü–æ—Ç—ñ–º —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –¥–æ `pinia` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `pinia.use()`:

```js
pinia.use(myPiniaPlugin)
```

–ü–ª–∞–≥—ñ–Ω–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –ª–∏—à–µ –¥–æ —Å—Ö–æ–≤–∏—â, —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö **–ø—ñ—Å–ª—è —Å–∞–º–∏—Ö –ø–ª–∞–≥—ñ–Ω—ñ–≤ —ñ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ `pinia` –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É**, —ñ–Ω–∞–∫—à–µ –≤–æ–Ω–∏ –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏–º—É—Ç—å—Å—è.

## –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â–∞

–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–æ –∫–æ–∂–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞, –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä–Ω—É–≤—à–∏ —ó—Ö –æ–±'—î–∫—Ç —É –ø–ª–∞–≥—ñ–Ω:

```js
pinia.use(() => ({ hello: 'world' }))
```

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ `store`, –∞–ª–µ **—è–∫—â–æ –º–æ–∂–ª–∏–≤–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤–µ—Ä—Å—ñ—ó –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è, —â–æ–± —ó—Ö –º–æ–∂–Ω–∞ –±—É–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤**:

```js
pinia.use(({ store }) => {
  store.hello = 'world'
})
```

–ë—É–¥—å-—è–∫–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å, —è–∫–∞ _–ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è_ –ø–ª–∞–≥—ñ–Ω–æ–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —Ç–æ–º—É, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ `hello` –≤–∏–¥–∏–º–∏–º —É —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –¥–æ–¥–∞–ª–∏ –π–æ–≥–æ –¥–æ `store._customProperties` **–ª–∏—à–µ –≤ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏**, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –π–æ–≥–æ –≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–æ–∑—Ä–æ–±–∫–∏:

```js
// –∑ –ø—Ä–∏–∫–ª–∞–¥—É –≤–∏—â–µ
pinia.use(({ store }) => {
  store.hello = 'world'
  // –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∞—à –∫–æ–º–ø–æ–Ω—É–≤–∞–ª—å–Ω–∏–∫ –≤–ø–æ—Ä–∞—î—Ç—å—Å—è –∑ —Ü–∏–º.
  // webpack —ñ vite –º–∞—é—Ç—å —Ä–æ–±–∏—Ç–∏ —Ü–µ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
  if (process.env.NODE_ENV === 'development') {
    // –¥–æ–¥–∞–π—Ç–µ –±—É–¥—å-—è–∫—ñ –∫–ª—é—á—ñ, —è–∫—ñ –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤ —Å—Ö–æ–≤–∏—â—ñ
    store._customProperties.add('hello')
  }
})
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∫–æ–∂–Ω–µ —Å—Ö–æ–≤–∏—â–µ –æ–±–≥–æ—Ä–Ω—É—Ç–æ [`reactive`](https://v3.vuejs.org/api/basic-reactivity.html#reactive), –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –±—É–¥—å-—è–∫–∏–π Ref (`ref()`, `computed()`, ...), —è–∫–∏–π –≤–æ–Ω–æ –º—ñ—Å—Ç–∏—Ç—å:

```js
const sharedRef = ref('shared')
pinia.use(({ store }) => {
  // –∫–æ–∂–Ω–µ —Å—Ö–æ–≤–∏—â–µ –º–∞—î –æ–∫—Ä–µ–º—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `hello`
  store.hello = ref('secret')
  // –≤–æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è
  store.hello // 'secret'

  // —É—Å—ñ —Å—Ö–æ–≤–∏—â–∞ —Å–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `shared`
  store.shared = sharedRef
  store.shared // 'shared'
})
```

–û—Å—å —á–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –≤—Å—ñ—Ö –æ–±—á–∏—Å–ª–µ–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –±–µ–∑ `.value` —ñ —á–æ–º—É –≤–æ–Ω–∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ñ.

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Å—Ç–∞–Ω—É –¥–æ —Å—Ö–æ–≤–∏—â–∞ –∞–±–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, —è–∫—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—ñ–¥ —á–∞—Å –≥—ñ–¥—Ä–∞—Ü—ñ—ó, **–≤–∞–º —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ —ó—Ö —É –¥–≤–æ—Ö –º—ñ—Å—Ü—è—Ö**:

- –£ `store` , —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –Ω—å–æ–≥–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `store.myState`
- –£ `store.$state`, —â–æ–± –π–æ–≥–æ –º–æ–∂–Ω–∞ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ —Ç–∞ **—Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—ñ–¥ —á–∞—Å SSR**.

–ö—Ä—ñ–º —Ç–æ–≥–æ, –≤–∞–º, –∑–≤–∏—á–∞–π–Ω–æ, –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ref()` (–∞–±–æ —ñ–Ω—à–∏–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–∏–π API), —â–æ–± –ø–æ—à–∏—Ä–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –¥–æ—Å—Ç—É–ø—ñ–≤:

```js
import { toRef, ref } from 'vue'

pinia.use(({ store }) => {
  // —â–æ–± –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–∏—Ç–∏ SSR, –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –º–∏ –Ω–µ
  // –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î–º–æ —ñ—Å–Ω—É—é—á–µ –∑–Ω–∞—á–µ–Ω–Ω—è
  if (!Object.prototype.hasOwnProperty(store.$state, 'hasError')) {
    // –≤–∏–∑–Ω–∞—á–µ–Ω–æ –≤ –ø–ª–∞–≥—ñ–Ω—ñ, —Ç–æ–º—É –∫–æ–∂–Ω–µ —Å—Ö–æ–≤–∏—â–µ –º–∞—î –æ–∫—Ä–µ–º—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å —Å—Ç–∞–Ω—É
    const hasError = ref(false)
    // –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó —É `$state` –¥–æ–∑–≤–æ–ª—è—î —ó—ó —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—ñ–¥ —á–∞—Å SSR
    store.$state.hasError = hasError
  }
  // –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –∑—ñ —Å—Ç–∞–Ω—É –≤ —Å—Ö–æ–≤–∏—â–µ, —Ç–∞–∫–∏–º —á–∏–Ω–æ–º –æ–±–∏–¥–≤–∞
  // –¥–æ—Å—Ç—É–ø–∏: store.hasError —ñ store.$state.hasError –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º—É—Ç—å —ñ —Å–ø—ñ–ª—å–Ω–æ
  // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º—É—Ç—å —Ç—É —Å–∞–º—É –∑–º—ñ–Ω–Ω—É
  // –î–∏–≤—ñ—Ç—å—Å—è https://ua.vuejs.org/api/reactivity-utilities.html#toref
  store.hasError = toRef(store.$state, 'hasError')

  // —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –∫—Ä–∞—â–µ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ `hasError`, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–æ –≤—Å–µ –æ–¥–Ω–æ
  // –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏–º–µ—Ç—å—Å—è –≤ —Ä–æ–∑–¥—ñ–ª—ñ `state` –≤ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, —ñ —è–∫—â–æ –º–∏
  // –ø–æ–≤–µ—Ä–Ω–µ–º–æ –π–æ–≥–æ, —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –≤—ñ–¥–æ–±—Ä–∞–∑—è—Ç—å –π–æ–≥–æ –¥–≤—ñ—á—ñ.
})
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É –∞–±–æ –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è, —è–∫—ñ –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –≤ –ø–ª–∞–≥—ñ–Ω—ñ (–∑–æ–∫—Ä–µ–º–∞ –≤–∏–∫–ª–∏–∫ `store.$patch()`), –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, —è–∫ —Å—Ö–æ–≤–∏—â–µ –±—É–¥–µ –∞–∫—Ç–∏–≤–Ω–∏–º, —Ç–æ–º—É **–Ω–µ –∞–∫—Ç–∏–≤—É—é—Ç—å –∂–æ–¥–Ω–∏—Ö –ø—ñ–¥–ø–∏—Å–æ–∫**.

:::warning
–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **Vue 2**, Pinia –ø—ñ–¥–ø–∞–¥–∞—î –ø—ñ–¥ [—Ç—ñ —Å–∞–º—ñ –∑–∞—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è —â–æ–¥–æ —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è](https://v2.vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats), —â–æ —ñ Vue. –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Vue.set()` (Vue 2.7) –∞–±–æ `set()` (–∑ `@vue/composition-api` –¥–ª—è Vue <2.7) –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —Å—Ç–∞–Ω—É, —Ç–∞–∫–∏—Ö —è–∫ `secret` —ñ `hasError`:

```js
import { set, toRef } from '@vue/composition-api'
pinia.use(({ store }) => {
  if (!Object.prototype.hasOwnProperty(store.$state, 'secret')) {
    const secretRef = ref('secret')
    // –Ø–∫—â–æ –¥–∞–Ω—ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω—ñ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—ñ–¥ —á–∞—Å SSR, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏
    // —ó—Ö —É –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, —â–æ–± –≤–æ–Ω–∏ –±—É–ª–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –ø—ñ–¥—ñ–±—Ä–∞–Ω—ñ –ø—ñ–¥ —á–∞—Å
    // –≥—ñ–¥—Ä–∞—Ü—ñ—ó
    set(store.$state, 'secret', secretRef)
  }
  // –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –π–æ–≥–æ —Ç–∞–∫–æ–∂ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ —Å—Ö–æ–≤–∏—â—ñ, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø
  // –¥–æ –Ω—å–æ–≥–æ –æ–±–æ–º–∞ —Å–ø–æ—Å–æ–±–∞–º–∏: `store.$state.secret` / `store.secret`
  set(store, 'secret', toRef(store.$state, 'secret'))
  store.secret // 'secret'
})
```

:::

#### –°–∫–∏–¥–∞–Ω–Ω—è —Å—Ç–∞–Ω—É, –¥–æ–¥–∞–Ω–æ–≥–æ –≤ –ø–ª–∞–≥—ñ–Ω–∞—Ö

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `$reset()` –Ω–µ —Å–∫–∏–¥–∞—î —Å—Ç–∞–Ω, –¥–æ–¥–∞–Ω–∏–π –ø–ª–∞–≥—ñ–Ω–∞–º–∏, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ —Ü–µ, —â–æ–± —Ç–∞–∫–æ–∂ —Å–∫–∏–Ω—É—Ç–∏ –¥–æ–¥–∞–Ω–∏–π —Å—Ç–∞–Ω:

```js
import { toRef, ref } from 'vue'

pinia.use(({ store }) => {
  // —Ü–µ —Ç–æ–π —Å–∞–º–∏–π –∫–æ–¥, —â–æ –π –≤–∏—â–µ –¥–ª—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è
  if (!Object.prototype.hasOwnProperty(store.$state, 'hasError')) {
    const hasError = ref(false)
    store.$state.hasError = hasError
  }
  store.hasError = toRef(store.$state, 'hasError')

  // –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç (`this`) –¥–ª—è —Å—Ö–æ–≤–∏—â–∞
  const originalReset = store.$reset.bind(store)

  // –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é $reset
  return {
    $reset() {
      originalReset()
      store.hasError = false
    }
  }
})
```

## –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π

–ü—ñ–¥ —á–∞—Å –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –∫–ª–∞—Å—ñ–≤, —è–∫—ñ –Ω–∞–¥—Ö–æ–¥—è—Ç—å –∑ —ñ–Ω—à–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫, –∞–±–æ –ø—Ä–æ—Å—Ç–æ —Ä–µ—á–µ–π, —è–∫—ñ –Ω–µ —î —Ä–µ–∞–∫—Ç–∏–≤–Ω–∏–º–∏, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –æ–≥–æ—Ä–Ω—É—Ç–∏ –æ–±'—î–∫—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `markRaw()` –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–≥–æ –≤ pinia. –û—Å—å –ø—Ä–∏–∫–ª–∞–¥ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞ –¥–æ –∫–æ–∂–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞:

```js
import { markRaw } from 'vue'
// –∞–¥–∞–ø—Ç—É–π—Ç–µ —Ü–µ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–∞—à –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä
import { router } from './router'

pinia.use(({ store }) => {
  store.router = markRaw(router)
})
```

## –í–∏–∫–ª–∏–∫ `$subscribe` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø–ª–∞–≥—ñ–Ω—ñ–≤

–í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ [store.$subscribe](./state.md#subscribing-to-the-state) —ñ [store.$onAction](./actions.md#subscribing-to-actions) —É –ø–ª–∞–≥—ñ–Ω–∞—Ö:

```ts
pinia.use(({ store }) => {
  store.$subscribe(() => {
    // —Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ö–æ–≤–∏—â–∞
  })
  store.$onAction(() => {
    // —Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –¥—ñ—ó —Å—Ö–æ–≤–∏—â–∞
  })
})
```

## –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –æ–ø—Ü—ñ–π

–ü—ñ–¥ —á–∞—Å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ö–æ–≤–∏—â –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —â–æ–± –ø—ñ–∑–Ω—ñ—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—Ö —ñ–∑ –ø–ª–∞–≥—ñ–Ω—ñ–≤. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–ø—Ü—ñ—é `debounce`, —è–∫–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∞–º –≤—ñ–¥–º—ñ–Ω—è—Ç–∏ –±—É–¥—å-—è–∫—É –¥—ñ—é:

```js
defineStore('search', {
  actions: {
    searchContacts() {
      // ...
    },
  },

  // —Ü–µ –±—É–¥–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø–ª–∞–≥—ñ–Ω–æ–º –ø—ñ–∑–Ω—ñ—à–µ
  debounce: {
    // –≤—ñ–¥–∫–ª–∞—Å—Ç–∏ –¥—ñ—é searchContacts –Ω–∞ 300 –º—Å
    searchContacts: 300,
  },
})
```

–ü–æ—Ç—ñ–º –ø–ª–∞–≥—ñ–Ω –º–æ–∂–µ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ü—é –æ–ø—Ü—ñ—é, —â–æ–± –∑–∞–≤–µ—Ä—à–∏—Ç–∏ –¥—ñ—ó —Ç–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω—ñ:

```js
// –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±—É–¥—å-—è–∫—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É debounce
import debounce from 'lodash/debounce'

pinia.use(({ options, store }) => {
  if (options.debounce) {
    // –º–∏ –∑–∞–º—ñ–Ω—é—î–º–æ –¥—ñ—ó –Ω–æ–≤–∏–º–∏
    return Object.keys(options.debounce).reduce((debouncedActions, action) => {
      debouncedActions[action] = debounce(
        store[action],
        options.debounce[action]
      )
      return debouncedActions
    }, {})
  }
})
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —è–∫ 3-–π –∞—Ä–≥—É–º–µ–Ω—Ç –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

```js
defineStore(
  'search',
  () => {
    // ...
  },
  {
    // —Ü–µ –±—É–¥–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø–ª–∞–≥—ñ–Ω–æ–º –ø—ñ–∑–Ω—ñ—à–µ
    debounce: {
      // –≤—ñ–¥–∫–ª–∞—Å—Ç–∏ –¥—ñ—é searchContacts –Ω–∞ 300 –º—Å
      searchContacts: 300,
    },
  }
)
```

## TypeScript

–£—Å–µ, —â–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≤–∏—â–µ, –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –≤–≤–µ–¥–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É, —Ç–æ–∂ –≤–∞–º –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `any` –∞–±–æ `@ts-ignore`.

### Typing plugins

–ü–ª–∞–≥—ñ–Ω Pinia –º–æ–∂–Ω–∞ –≤–≤–µ—Å—Ç–∏ —Ç–∞–∫–∏–º —á–∏–Ω–æ–º:

```ts
import { PiniaPluginContext } from 'pinia'

export function myPiniaPlugin(context: PiniaPluginContext) {
  // ...
}
```

### –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —Å—Ö–æ–≤–∏—â–∞

–î–æ–¥–∞—é—á–∏ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –¥–æ —Å—Ö–æ–≤–∏—â, –≤–∏ —Ç–∞–∫–æ–∂ –ø–æ–≤–∏–Ω–Ω—ñ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `PiniaCustomProperties`.

```ts
import 'pinia'
import type { Router } from 'vue-router'

declare module 'pinia' {
  export interface PiniaCustomProperties {
    // –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ç–µ—Ä–∞ –º–∏ –º–æ–∂–µ–º–æ –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —è–∫ strings, —Ç–∞–∫ —ñ refs
    set hello(value: string | Ref<string>)
    get hello(): string

    // –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—à—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
    simpleNumber: number

    // –≤–∏–∑–Ω–∞—á—Ç–µ —Ç–∏–ø –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞, –¥–æ–¥–∞–Ω–∏–π –ø–ª–∞–≥—ñ–Ω–æ–º –≤–∏—â–µ (#adding-new-external-properties)
    router: Router
  }
}
```

–ü–æ—Ç—ñ–º –π–æ–≥–æ –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ –ø–∏—Å–∞—Ç–∏ —Ç–∞ —á–∏—Ç–∞—Ç–∏:

```ts
pinia.use(({ store }) => {
  store.hello = 'Hola'
  store.hello = ref('Hola')

  store.simpleNumber = Math.random()
  // @ts-expect-error: –º–∏ –≤–∫–∞–∑–∞–ª–∏ —Ç–∏–ø –Ω–µ–≤—ñ—Ä–Ω–æ
  store.simpleNumber = ref(Math.random())
})
```

`PiniaCustomProperties` - —Ü–µ –∑–∞–≥–∞–ª—å–Ω–∏–π —Ç–∏–ø, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Å—Ö–æ–≤–∏—â–∞. –£—è–≤—ñ—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥, –¥–µ –º–∏ –∫–æ–ø—ñ—é—î–º–æ –ø–æ—á–∞—Ç–∫–æ–≤—ñ –æ–ø—Ü—ñ—ó —è–∫ `$options` (—Ü–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –ª–∏—à–µ –¥–ª—è –æ–ø—Ü—ñ–π–Ω–∏—Ö —Å—Ö–æ–≤–∏—â):

```ts
pinia.use(({ options }) => ({ $options: options }))
```

–ú–∏ –º–æ–∂–µ–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é 4 –∑–∞–≥–∞–ª—å–Ω–∏—Ö —Ç–∏–ø—ñ–≤ `PiniaCustomProperties`:

```ts
import 'pinia'

declare module 'pinia' {
  export interface PiniaCustomProperties<Id, S, G, A> {
    $options: {
      id: Id
      state?: () => S
      getters?: G
      actions?: A
    }
  }
}
```

:::tip
–ü—Ä–∏ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—ñ —Ç–∏–ø—ñ–≤ —É –¥–∂–µ–Ω–µ—Ä–∏–∫–∞—Ö –≤–æ–Ω–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –Ω–∞–∑–≤–∞–Ω—ñ **—Ç–æ—á–Ω–æ —Ç–∞–∫, —è–∫ —É –≤–∏—Ö—ñ–¥–Ω–æ–º—É –∫–æ–¥—ñ**. `Id` –Ω–µ –º–æ–∂–µ –º–∞—Ç–∏ –Ω–∞–∑–≤—É `id` –∞–±–æ `I`, –∞ `S` –Ω–µ –º–æ–∂–µ –º–∞—Ç–∏ –Ω–∞–∑–≤—É `State`. –û—Å—å —â–æ –æ–∑–Ω–∞—á–∞—î –∫–æ–∂–Ω–∞ –ª—ñ—Ç–µ—Ä–∞:

- S: –°—Ç–∞–Ω
- G: –ì–µ—Ç–µ—Ä–∏
- A: –î—ñ—ó
- SS: –ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞–Ω–µ —Å—Ö–æ–≤–∏—â–µ / –°—Ö–æ–≤–∏—â–µ

:::

### –¢–∏–ø—ñ–∑–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É

–î–æ–¥–∞—é—á–∏ –Ω–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Å—Ç–∞–Ω—É (–¥–æ –æ–±–æ—Ö, `store` —ñ `store.$state`), –Ω–∞—Ç–æ–º—ñ—Å—Ç—å –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ —Ç–∏–ø –¥–æ `PiniaCustomStateProperties`. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `PiniaCustomProperties`, –≤—ñ–Ω –æ—Ç—Ä–∏–º—É—î –ª–∏—à–µ –∑–∞–≥–∞–ª—å–Ω–∏–π `State`:

```ts
import 'pinia'

declare module 'pinia' {
  export interface PiniaCustomStateProperties<S> {
    hello: string
  }
}
```

### –¢–∏–ø—ñ–∑–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—é—é—á–∏ –Ω–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è `defineStore()`, –≤–∞–º —Å–ª—ñ–¥ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ `DefineStoreOptionsBase`. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `PiniaCustomProperties`, –≤—ñ–Ω –Ω–∞–¥–∞—î –ª–∏—à–µ –¥–≤–∞ –¥–∂–µ–Ω–µ—Ä–∏–∫–∏: State —Ç–∞ Store —Ç–∏–ø–∏, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –≤–∞–º –æ–±–º–µ–∂–∏—Ç–∏ —Ç–µ, —â–æ –º–æ–∂–Ω–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞–∑–≤–∏ –¥—ñ–π:

```ts
import 'pinia'

declare module 'pinia' {
  export interface DefineStoreOptionsBase<S, Store> {
    // –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –º—Å –¥–ª—è –±—É–¥—å-—è–∫–æ—ó –¥—ñ—ó
    debounce?: Partial<Record<keyof StoreActions<Store>, number>>
  }
}
```

:::tip
–Ü—Å–Ω—É—î —Ç–∞–∫–æ–∂ —Ç–∏–ø `StoreGetters` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è _–≥–µ—Ç–µ—Ä—ñ–≤_ –∑ —Ç–∏–ø—É Store. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —Ä–æ–∑—à–∏—Ä–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ _setup —Å—Ö–æ–≤–∏—â_ –∞–±–æ _–æ–ø—Ü—ñ–π–Ω–∏—Ö stores_ **–ª–∏—à–µ** —à–ª—è—Ö–æ–º —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ `DefineStoreOptions` —ñ `DefineSetupStoreOptions` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ.
:::

## Nuxt.js

–Ø–∫—â–æ [–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ pinia —Ä–∞–∑–æ–º —ñ–∑ Nuxt](../ssr/nuxt.md), —Å–ø–æ—á–∞—Ç–∫—É –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ [–ø–ª–∞–≥—ñ–Ω Nuxt](https://nuxt.com/docs/guide/directory-structure/plugins). –¶–µ –¥–∞—Å—Ç—å –≤–∞–º –¥–æ—Å—Ç—É–ø –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ `pinia`:

```ts
// plugins/myPiniaPlugin.ts
import { PiniaPluginContext } from 'pinia'

function MyPiniaPlugin({ store }: PiniaPluginContext) {
  store.$subscribe((mutation) => {
    // –≤—ñ–¥—Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ö–æ–≤–∏—â–∞
    console.log(`[üçç ${mutation.storeId}]: ${mutation.type}.`)
  })

  // –ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —Ü–µ –º–∞—î –±—É—Ç–∏ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–æ, —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ TS
  return { creationTime: new Date() }
}

export default defineNuxtPlugin(({ $pinia }) => {
  $pinia.use(MyPiniaPlugin)
})
```

–ó–∞—É–≤–∞–∂—Ç–µ, —â–æ –≤ –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è TypeScript, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–¥–∞–ª–∏—Ç–∏ –∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—É `PiniaPluginContext` —ñ `Plugin`, –∞ —Ç–∞–∫–æ–∂ —ó—Ö —ñ–º–ø–æ—Ä—Ç, —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Ñ–∞–π–ª `.js`.

### Nuxt.js 2

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Nuxt.js 2, —Ç–∏–ø–∏ –¥–µ—â–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è:

```ts
// plugins/myPiniaPlugin.ts
import { PiniaPluginContext } from 'pinia'
import { Plugin } from '@nuxt/types'

function MyPiniaPlugin({ store }: PiniaPluginContext) {
  store.$subscribe((mutation) => {
    // –≤—ñ–¥—Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ –∑–º—ñ–Ω–∏ —Å—Ö–æ–≤–∏—â–∞
    console.log(`[üçç ${mutation.storeId}]: ${mutation.type}.`)
  })

  // –ó–∞—É–≤–∞–∂—Ç–µ, —â–æ —Ü–µ –º–∞—î –±—É—Ç–∏ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–µ, —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ TS
  return { creationTime: new Date() }
}

const myPlugin: Plugin = ({ $pinia }) => {
  $pinia.use(MyPiniaPlugin)
}

export default myPlugin
```
