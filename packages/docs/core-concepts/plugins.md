# –ü–ª–∞–≥–∏–Ω—ã %{#plugins}%

–•—Ä–∞–Ω–∏–ª–∏—â–∞ Pinia –º–æ–∂–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞—Å—à–∏—Ä–∏—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–º—É API. –í–æ—Ç —Å–ø–∏—Å–æ–∫ –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å:

- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- –û–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤
- –ü–µ—Ä–µ—Ö–≤–∞—Ç –¥–µ–π—Å—Ç–≤–∏–π –∏ –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–∫–∏—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ (side-effects), –∫–∞–∫ [Local Storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)
- –ü—Ä–∏–º–µ–Ω—è—Ç—å **—Ç–æ–ª—å–∫–æ** –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º

–ü–ª–∞–≥–∏–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä pinia —Å –ø–æ–º–æ—â—å—é `pinia.use()`. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–∏–º–µ—Ä - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–æ –≤—Å–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º, –ø—É—Ç–µ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ–±—ä–µ–∫—Ç–∞:

```js
import { createPinia } from 'pinia'

// –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ `secret` –≤ –∫–∞–∂–¥–æ–µ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
// –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥—Ä—É–≥–æ–º —Ñ–∞–π–ª–µ
function SecretPiniaPlugin() {
  return { secret: 'the cake is a lie' }
}

const pinia = createPinia()
// –ø–µ—Ä–µ–¥–∞—Ç—å –ø–ª–∞–≥–∏–Ω pinia
pinia.use(SecretPiniaPlugin)

// –≤ –¥—Ä—É–≥–æ–º —Ñ–∞–π–ª–µ
const store = useStore()
store.secret // 'the cake is a lie'
```

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–æ—É—Ç–µ—Ä, –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∏–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

## –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ %{#introduction}%

–ü–ª–∞–≥–∏–Ω Pinia - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ –∂–µ–ª–∞–Ω–∏—é –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞, –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–∏–Ω –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç - _–∫–æ–Ω—Ç–µ–∫—Å—Ç_:

```js
export function myPiniaPlugin(context) {
  context.pinia // pinia, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å –ø–æ–º–æ—â—å—é `createPinia()`
  context.app // —Ç–µ–∫—É—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ —Å –ø–æ–º–æ—â—å—é `createApp()` (—Ç–æ–ª—å–∫–æ –¥–ª—è Vue 3)
  context.store // —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–ª–∞–≥–∏–Ω–æ–º
  context.options // –æ–±—ä–µ–∫—Ç –æ–ø—Ü–∏–π, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ `defineStore()`, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  // ...
}
```

–ó–∞—Ç–µ–º —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `pinia` —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `pinia.use()`:

```js
pinia.use(myPiniaPlugin)
```

–ü–ª–∞–≥–∏–Ω—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞–º, —Å–æ–∑–¥–∞–Ω–Ω—ã–º **–ø–æ—Å–ª–µ —Å–∞–º–∏—Ö –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ `pinia` –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**, –∏–Ω–∞—á–µ –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã.

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ %{#augmenting-a-store}%

–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –∫–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞—è –∏—Ö –æ–±—ä–µ–∫—Ç –≤ –ø–ª–∞–≥–∏–Ω–µ:

```js
pinia.use(() => ({ hello: 'world' }))
```

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –Ω–∞–ø—Ä—è–º—É—é –≤ `store`, –Ω–æ **–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ—Ä—Å–∏—é —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –±—ã—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–º–∏ —Å –ø–æ–º–æ—â—å—é devtools**:

```js
pinia.use(({ store }) => {
  store.hello = 'world'
})
```

–õ—é–±–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, _–≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ_ –ø–ª–∞–≥–∏–Ω–æ–º, –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å—Å—è devtools. –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å `hello` –≤–∏–¥–∏–º—ã–º –≤ devtools, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ –µ–≥–æ –≤ `store._customProperties` **—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –µ–≥–æ –≤ devtools:

```js
// –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ
pinia.use(({ store }) => {
  store.hello = 'world'
  // —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Å–±–æ—Ä—â–∏–∫ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥. webpack –∏ vite –¥–æ–ª–∂–Ω—ã –¥–µ–ª–∞—Ç—å —ç—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  if (process.env.NODE_ENV === 'development') {
    // –¥–æ–±–∞–≤—å—Ç–µ –ª—é–±—ã–µ –∫–ª—é—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    store._customProperties.add('hello')
  }
})
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ [`reactive`](https://v3.vuejs.org/api/basic-reactivity.html#reactive), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –ª—é–±–æ–π Ref (`ref()`, ` computed()`, ...), –∫–æ—Ç–æ—Ä—ã–π –æ–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:

```js
const sharedRef = ref('shared')
pinia.use(({ store }) => {
  // —É –∫–∞–∂–¥–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –µ—Å—Ç—å —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ `hello`
  store.hello = ref('secret')
  // –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è
  store.hello // 'secret'

  // –≤—Å–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ `shared`
  store.shared = sharedRef
  store.shared // 'shared'
})
```

–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –∫–æ –≤—Å–µ–º –≤—ã—á–∏—Å–ª—è–µ–º—ã–º —Å–≤–æ–π—Å—Ç–≤–∞–º –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –±–µ–∑ `.value` –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è %{#adding-new-state}%

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏, **–≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö**:

- –í `store`, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø —Å –ø–æ–º–æ—â—å—é `store.myState`
- –í `store.$state`, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ devtools –∏ **—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º—è SSR**.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö –∫ –Ω–µ–º—É, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –ø—Ä–∏–¥–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ref()` (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–π API):

```js
import { toRef, ref } from 'vue'

pinia.use(({ store }) => {
  // —á—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å SSR, –Ω–∞–º –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º—ã –Ω–µ
  // –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  if (!Object.prototype.hasOwnProperty(store.$state, 'hasError')) {
    // hasError –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞–≥–∏–Ω–∞, –ø–æ—ç—Ç–æ–º—É –∫–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–º–µ–µ—Ç —Å–≤–æ–µ
    // –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    const hasError = ref(false)
    // —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞ `$state` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –µ–µ –≤–æ –≤—Ä–µ–º—è SSR
    store.$state.hasError = hasError
  }
  // –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ ref-—Å—Å—ã–ª–∫—É –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º
  // –æ–±–∞ –¥–æ—Å—Ç—É–ø–∞: store.hasError –∏ store.$state.hasError –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
  // –∏ —Å–æ–≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
  // –°–º. https://vuejs.org/api/reactivity-utilities.html#toref
  store.hasError = toRef(store.$state, 'hasError')

  // –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –ª—É—á—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å hasError, —Ç–∞–∫ –∫–∞–∫ –æ–Ω
  // –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ state –≤ devtools
  // –∏ –µ—Å–ª–∏ –º—ã –µ–≥–æ –≤–µ—Ä–Ω–µ–º, devtools –æ—Ç–æ–±—Ä–∞–∑—è—Ç –µ–≥–æ –¥–≤–∞–∂–¥—ã.
})
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –µ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞–≥–∏–Ω–∞ (–≤–∫–ª—é—á–∞—è –≤—ã–∑–æ–≤ `store.$patch()`), –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, **–Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –Ω–∏–∫–∞–∫–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫**.

:::warning –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ**Vue 2**, Pinia –ø–æ–¥–≤–µ—Ä–∂–µ–Ω–∞ [—Ç–µ–º –∂–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏](https://v2.vuejs.org/v2/guide/reactivity.html#Change-Detection-Caveats), —á—Ç–æ –∏ Vue. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç–∞–∫–∏—Ö –∫–∞–∫ `secret` –∏ `hasError`, –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Vue.set()` (–¥–ª—è Vue 2.7) –∏–ª–∏ `set()` (–∏–∑ `@vue/composition-api` –¥–ª—è Vue <2.7):

```js
import { set, toRef } from '@vue/composition-api'
pinia.use(({ store }) => {
  if (!Object.prototype.hasOwnProperty(store.$state, 'secret')) {
    const secretRef = ref('secret')
    // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–æ –≤—Ä–µ–º—è SSR, –∏—Ö —Å–ª–µ–¥—É–µ—Ç
    // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤ —Å–≤–æ–π—Å—Ç–≤–µ $state, —á—Ç–æ–±—ã –æ–Ω–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–ª–∏—Å—å –∏
    // –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–ª–∏—Å—å –≤–æ –≤—Ä–µ–º—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏
    set(store.$state, 'secret', secretRef)
  }
  // —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –∫ –Ω–µ–º—É –¥–æ—Å—Ç—É–ø
  // –æ–±–æ–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏: `store.$state.secret` / `store.secret`
  set(store, 'secret', toRef(store.$state, 'secret'))
  store.secret // 'secret'
})
```

:::

#### –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö %{#resetting-state-added-in-plugins}%

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `$reset()` –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –ø–ª–∞–≥–∏–Ω–∞–º–∏, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ, —á—Ç–æ–±—ã —Å–±—Ä–∞—Å—ã–≤–∞–ª–æ—Å—å –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ:

```js
import { toRef, ref } from 'vue'

pinia.use(({ store }) => {
  // –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏, —ç—Ç–æ —Ç–æ—Ç –∂–µ –∫–æ–¥, —á—Ç–æ –∏ –≤—ã—à–µ
  if (!Object.prototype.hasOwnProperty(store.$state, 'hasError')) {
    const hasError = ref(false)
    store.$state.hasError = hasError
  }
  store.hasError = toRef(store.$state, 'hasError')

  // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç (`this`) –Ω–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  const originalReset = store.$reset.bind(store)

  // –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ $reset
  return {
    $reset() {
      originalReset()
      store.hasError = false
    }
  }
})
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–Ω–µ—à–Ω–∏—Ö —Å–≤–æ–π—Å—Ç–≤ %{#adding-new-external-properties}%

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–≤–æ–π—Å—Ç–≤, —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∏–∑ –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤–µ—â–µ–π, –Ω–µ —è–≤–ª—è—é—â–∏—Ö—Å—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏, –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ–π –æ–±—ä–µ–∫—Ç–∞ –≤ pinia —Å–ª–µ–¥—É–µ—Ç –æ–±–µ—Ä–Ω—É—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é `markRaw()`. –ü—Ä–∏–≤–µ–¥–µ–º –ø—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–æ—É—Ç–µ—Ä–∞ –≤ –∫–∞–∂–¥–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ:

```js
import { markRaw } from 'vue'
// –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–∞—à –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä
import { router } from './router'

pinia.use(({ store }) => {
  store.router = markRaw(router)
})
```

## –í—ã–∑–æ–≤ `$subscribe`–≤–Ω—É—Ç—Ä–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ %{#—Åalling-subscribe-inside-plugins}%

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [store.$subscribe](./state.md#subscribing-to-the-state) –∏ [store.$onAction](./actions.md#subscribing-to-actions) –∏ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞–≥–∏–Ω–æ–≤:

```ts
pinia.use(({ store }) => {
  store.$subscribe(() => {
    // —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  })
  store.$onAction(() => {
    // —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥–µ–π—Å—Ç–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
  })
})
```

## Adding new options %{#adding-new-options}%

–ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –æ–ø—Ü–∏–∏, —á—Ç–æ–±—ã –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ–ø—Ü–∏—é `debounce`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å –ª—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:

```js
defineStore('search', {
  actions: {
    searchContacts() {
      // ...
    },
  },

  // –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø–ª–∞–≥–∏–Ω–æ–º
  debounce: {
    // –∑–∞–¥–µ—Ä–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è searchContacts –Ω–∞ 300–º—Å
    searchContacts: 300,
  },
})
```

–ó–∞—Ç–µ–º –ø–ª–∞–≥–∏–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å —ç—Ç—É –æ–ø—Ü–∏—é –¥–ª—è –æ–±–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∏ –∑–∞–º–µ–Ω—ã –∏—Å—Ö–æ–¥–Ω—ã—Ö:

```js
// –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É debounce
import debounce from 'lodash/debounce'

pinia.use(({ options, store }) => {
  if (options.debounce) {
    // –º—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –Ω–æ–≤—ã–µ
    return Object.keys(options.debounce).reduce((debouncedActions, action) => {
      debouncedActions[action] = debounce(
        store[action],
        options.debounce[action]
      )
      return debouncedActions
    }, {})
  }
})
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ setup-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–ø—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ 3-–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

```js
defineStore(
  'search',
  () => {
    // ...
  },
  {
    // –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –ø–ª–∞–≥–∏–Ω–æ–º
    debounce: {
      // –∑–∞–¥–µ—Ä–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è searchContacts –Ω–∞ 300–º—Å
      searchContacts: 300,
    },
  }
)
```

## TypeScript %{#typescript}%

–í—Å–µ, —á—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≤—ã—à–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–∏, —Ç–∞–∫ —á—Ç–æ –≤–∞–º –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `any` –∏–ª–∏ `@ts-ignore`.

### Typing plugins %{#typing-plugins}%

–ü–ª–∞–≥–∏–Ω Pinia –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```ts
import { PiniaPluginContext } from 'pinia'

export function myPiniaPlugin(context: PiniaPluginContext) {
  // ...
}
```

### Typing new store properties %{#typing-new-store-properties}%

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–∂–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `PiniaCustomProperties`.

```ts
import 'pinia'
import type { Router } from 'vue-router'

declare module 'pinia' {
  export interface PiniaCustomProperties {
    // –∏—Å–ø–æ–ª—å–∑—É—è —Å–µ—Ç—Ç–µ—Ä, –º—ã –º–æ–∂–µ–º —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ —Å—Ç—Ä–æ–∫, —Ç–∞–∫ –∏ ref-—Å—Å—ã–ª–æ–∫
    set hello(value: string | Ref<string>)
    get hello(): string

    // –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    simpleNumber: number

    // —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–ª–∞–≥–∏–Ω–æ–º –≤—ã—à–µ (#adding-new-external-properties)
    router: Router
  }
}
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –µ–≥–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–∏—Å–∞—Ç—å –∏ —á–∏—Ç–∞—Ç—å:

```ts
pinia.use(({ store }) => {
  store.hello = 'Hola'
  store.hello = ref('Hola')

  store.simpleNumber = Math.random()
  // @ts-expect-error: we haven't typed this correctly
  store.simpleNumber = ref(Math.random())
})
```

`PiniaCustomProperties` - —ç—Ç–æ –æ–±—â–∏–π —Ç–∏–ø, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —Å–≤–æ–π—Å—Ç–≤–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –º—ã –∫–æ–ø–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –æ–ø—Ü–∏–∏ –∫–∞–∫ `$options` (—ç—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è option-—Ö—Ä–∞–Ω–∏–ª–∏—â):

```ts
pinia.use(({ options }) => ({ $options: options }))
```

–ú—ã –º–æ–∂–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è 4 –¥–∂–µ–Ω–µ—Ä–∏–∫–∞ `PiniaCustomProperties`:

```ts
import 'pinia'

declare module 'pinia' {
  export interface PiniaCustomProperties<Id, S, G, A> {
    $options: {
      id: Id
      state?: () => S
      getters?: G
      actions?: A
    }
  }
}
```

:::tip –°–æ–≤–µ—Ç
–ü—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –≤ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞—Ö –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–∑–≤–∞–Ω—ã **—Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ**. `Id` –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–≤–∞–Ω `id` –∏–ª–∏ `I`, –∞ `S` –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞–∑–≤–∞–Ω `State`. –í–æ—Ç —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞–∂–¥–∞—è –±—É–∫–≤–∞:

- S: –°–æ—Å—Ç–æ—è–Ω–∏–µ
- G: –ì–µ—Ç—Ç–µ—Ä—ã
- A: –î–µ–π—Å—Ç–≤–∏—è
- SS: Setup-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ / —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

:::

### –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è %{#typing-new-state}%

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–≤–æ–π—Å—Ç–≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∫–∞–∫ –≤ `store`, —Ç–∞–∫ –∏ –≤ `store.$state`), –≤—ã –¥–æ–ª–∂–Ω—ã –¥–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –≤ `PiniaCustomStateProperties` –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `PiniaCustomProperties`, –≤ –Ω–µ–≥–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–∂–µ–Ω–µ—Ä–∏–∫ `State`:

```ts
import 'pinia'

declare module 'pinia' {
  export interface PiniaCustomStateProperties<S> {
    hello: string
  }
}
```

### –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∏—è %{#typing-new-creation-options}%

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –æ–ø—Ü–∏–π –¥–ª—è `defineStore()`, –≤—ã –¥–æ–ª–∂–Ω—ã —Ä–∞—Å—à–∏—Ä—è—Ç—å `DefineStoreOptionsBase`. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `PiniaCustomProperties`, –≤ –Ω–µ–≥–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–≤–∞ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞: State –∏ Store, –ø–æ–∑–≤–æ–ª—è—è –≤–∞–º –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ç–æ, —á—Ç–æ –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π:

```ts
import 'pinia'

declare module 'pinia' {
  export interface DefineStoreOptionsBase<S, Store> {
    // –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø number –¥–ª—è –º—Å –¥–ª—è –ª—é–±–æ–≥–æ –∏–∑ –¥–µ–π—Å—Ç–≤–∏–π
    debounce?: Partial<Record<keyof StoreActions<Store>, number>>
  }
}
```

:::tip –°–æ–≤–µ—Ç
–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫–∂–µ —Ç–∏–ø `StoreGetters` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è _–≥–µ—Ç—Ç–µ—Ä–æ–≤_ –∏–∑ —Ç–∏–ø–∞ Store. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –æ–ø—Ü–∏–∏ _setup-—Ö—Ä–∞–Ω–∏–ª–∏—â_ –∏–ª–∏ _option-—Ö—Ä–∞–Ω–∏–ª–∏—â_ **—Ç–æ–ª—å–∫–æ**, —Ä–∞—Å—à–∏—Ä–∏–≤ —Ç–∏–ø—ã `DefineStoreOptions` –∏ `DefineSetupStoreOptions` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
:::

## Nuxt.js %{#nuxt-js}%

–ü—Ä–∏ [–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ pinia –≤–º–µ—Å—Ç–µ —Å Nuxt](../ssr/nuxt.md) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å [Nuxt –ø–ª–∞–≥–∏–Ω](https://nuxt.com/docs/guide/directory-structure/plugins). –≠—Ç–æ –¥–∞—Å—Ç –≤–∞–º –¥–æ—Å—Ç—É–ø –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É `pinia`:

```ts
// plugins/myPiniaPlugin.ts
import { PiniaPluginContext } from 'pinia'

function MyPiniaPlugin({ store }: PiniaPluginContext) {
  store.$subscribe((mutation) => {
    // —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è  —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    console.log(`[üçç ${mutation.storeId}]: ${mutation.type}.`)
  })

  // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ TS
  return { creationTime: new Date() }
}

export default defineNuxtPlugin(({ $pinia }) => {
  $pinia.use(MyPiniaPlugin)
})
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TypeScript, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ `.js` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ `PiniaPluginContext` –∏ `Plugin`, –∞ —Ç–∞–∫–∂–µ –∏—Ö –∏–º–ø–æ—Ä—Ç.

### Nuxt.js 2 %{#nuxt-js-2}%

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Nuxt.js 2, —Ç–æ —Ç–∏–ø—ã –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è:

```ts
// plugins/myPiniaPlugin.ts
import { PiniaPluginContext } from 'pinia'
import { Plugin } from '@nuxt/types'

function MyPiniaPlugin({ store }: PiniaPluginContext) {
  store.$subscribe((mutation) => {
    // —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è  —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
    console.log(`[üçç ${mutation.storeId}]: ${mutation.type}.`)
  })

  // –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–æ, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ TS
  return { creationTime: new Date() }
}

const myPlugin: Plugin = ({ $pinia }) => {
  $pinia.use(MyPiniaPlugin)
}

export default myPlugin
```
